# ShoeClean API: REST API Layanan Cuci Sepatu

Dokumentasi ini merinci arsitektur dan panduan penggunaan untuk ShoeClean API, sebuah layanan backend yang dibangun menggunakan Node.js dan Express untuk mengelola data operasional layanan cuci sepatu.

## 1\. Abstrak Proyek

Proyek ini menyediakan serangkaian endpoint RESTful untuk operasi CRUD (Create, Read, Update, Delete) pada data cucian sepatu. API ini dirancang untuk menjadi backend _headless_ yang dapat dikonsumsi oleh berbagai aplikasi front-end (web dashboard, aplikasi mobile, dll). Data disimpan dalam database PostgreSQL yang dikelola oleh Supabase, dan API ini di-deploy sebagai _serverless functions_ di Vercel.

## 2\. Fitur Utama

- **Manajemen Data Sepatu:** CRUD penuh untuk entri data sepatu.
- **Pelacakan Status:** Memperbarui dan melacak status cucian (misalnya: Diterima, Dicuci, Selesai, Diambil).
- **Pencarian & Filter:** Kemampuan untuk memfilter data berdasarkan kriteria, seperti status.
- **Siap Produksi:** Dikonfigurasi untuk deployment di Vercel dengan koneksi ke Supabase.

## 3\. Teknologi yang Digunakan

- **Backend:** Node.js, Express.js
- **Database:** Supabase (PostgreSQL)
- **Deployment:** Vercel
- **Modul Pendukung:** dotenv (untuk environment variables), cors (untuk Cross-Origin requests), @supabase/supabase-js.

## 4\. Panduan Instalasi dan Deployment

### Langkah 1: Setup Database (Supabase)

- **Buat Proyek:** Buat akun di [Supabase](https://supabase.com/) dan buat proyek baru.
- **Ambil Kredensial:** Simpan **Project URL** dan **anon public key** dari menu Project Settings > API.
- **Jalankan Skrip SQL:** Pergi ke SQL Editor dan jalankan skrip berikut untuk membuat tabel items. Skrip ini menggunakan tanda kutip ganda ("...") untuk menjaga _case-sensitivity_ nama kolom (penting untuk JavaScript).  
    \-- Membuat tabel untuk menyimpan data sepatu
    ```
    CREATE TABLE items (  
    "id" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,  
    "created_at" TIMESTAMPTZ DEFAULT now() NOT NULL,  
    "nama" TEXT NOT NULL,  
    "status" TEXT NOT NULL,  
    "tanggalMasuk" DATE NOT NULL,  
    "tanggalSelesai" DATE  
    );  
    <br/>\-- Mengaktifkan Row Level Security (RLS)  
    ALTER TABLE items ENABLE ROW LEVEL SECURITY;  
    <br/>\-- Membuat policy agar API (dengan kunci anon) bisa mengakses data  
    \-- PERHATIAN: Ini mengizinkan semua operasi (SELECT, INSERT, UPDATE, DELETE)  
    \-- oleh siapa saja yang memiliki kunci anon Anda.  
    CREATE POLICY "Allow public CRUD"  
    ON items  
    FOR ALL  
    TO anon  
    USING (true)  
    WITH CHECK (true);
    
### Langkah 2: Menjalankan di Lokal

- **Clone Repository:**
    ```
    git clone \[<https://github.com/username/nama-repo.git\>](<https://github.com/username/nama-repo.git>)  
    cd nama-repo  

- **Install Dependensi:**
    ```  
    npm install  

- **Buat File Environment:** Buat file bernama .env di root proyek.
- **Isi .env:** Masukkan kredensial Supabase Anda.
    ```
    SUPABASE_URL="<https://URL_PROYEK_ANDA.supabase.co>"  
    SUPABASE_KEY="KUNCI_ANON_PUBLIK_ANDA"  

- **Jalankan Server:**
    ```  
    npm run dev  
    <br/>Server akan berjalan di <http://localhost:3000>.

### Langkah 3: Deployment ke Vercel

- **Push ke GitHub:** Pastikan proyek Anda sudah ada di repository GitHub.
- **Impor Proyek:** Di dashboard Vercel, impor repository GitHub Anda.
- **Konfigurasi Environment:** Vercel akan otomatis mendeteksi vercel.json. Pergi ke Settings > Environment Variables dan tambahkan:
  - SUPABASE_URL: (Isi dengan URL Supabase Anda)
  - SUPABASE_KEY: (Isi dengan Kunci Anon Supabase Anda)
- **Deploy:** Klik "Deploy". Vercel akan membangun dan menjalankan API Anda.

## 5\. Dokumentasi API (Endpoint)

Struktur data utama untuk request dan response body:

{  
"id": 1,  
"created_at": "2025-10-23T10:00:00Z",  
"nama": "Nike Air Force 1",  
"status": "Sedang Dicuci",  
"tanggalMasuk": "2025-10-23",  
"tanggalSelesai": null  
}  

### GET /items

Menampilkan semua data sepatu. Mendukung filter berdasarkan status.

- **Endpoint:** GET /items
- **Query Params (Opsional):**
  - status: (Contoh: GET /items?status=Selesai)
- **Response Sukses (200 OK):**  
    \[  
    {  
    "id": 1,  
    "nama": "Nike Air Force 1",  
    "status": "Selesai",  
    ...  
    },  
    {  
    "id": 2,  
    "nama": "Adidas Samba",  
    "status": "Selesai",  
    ...  
    }  
    \]  

### GET /items/:id

Menampilkan detail satu sepatu berdasarkan ID.

- **Endpoint:** GET /items/1
- **Response Sukses (200 OK):**  
    {  
    "id": 1,  
    "nama": "Nike Air Force 1",  
    "status": "Selesai",  
    ...  
    }  

- **Response Error (404 Not Found):**  
    { "message": "Data tidak ditemukan." }  

### POST /items

Membuat data sepatu baru.

- **Endpoint:** POST /items
- **Request Body (JSON):**  
    {  
    "nama": "Vans Old Skool",  
    "status": "Sedang Dicuci",  
    "tanggalMasuk": "2025-10-24"  
    }  

- **Response Sukses (201 Created):**  
    {  
    "message": "Data sepatu berhasil ditambahkan.",  
    "data": {  
    "id": 3,  
    "nama": "Vans Old Skool",  
    "status": "Sedang Dicuci",  
    "tanggalMasuk": "2025-10-24",  
    "tanggalSelesai": null,  
    ...  
    }  
    }  

- **Response Error (400 Bad Request):**  
    {  
    "message": "Data tidak lengkap. 'nama', 'status', dan 'tanggalMasuk' diperlukan."  
    }  

### PUT /items/:id

Memperbarui data sepatu (biasanya untuk status atau tanggal selesai).

- **Endpoint:** PUT /items/3
- **Request Body (JSON):**  
    {  
    "status": "Selesai",  
    "tanggalSelesai": "2025-10-25"  
    }  

- **Response Sukses (200 OK):**  
    {  
    "message": "Status sepatu berhasil diperbarui.",  
    "data": {  
    "id": 3,  
    "nama": "Vans Old Skool",  
    "status": "Selesai",  
    "tanggalSelesai": "2025-10-25",  
    ...  
    }  
    }  

### DELETE /items/:id

Menghapus data sepatu dari database.

- **Endpoint:** DELETE /items/3
- **Response Sukses (200 OK):**  
    {  
    "message": "Data sepatu berhasil dihapus."  
    }  

- **Response Error (404 Not Found):**  
    { "message": "Data tidak ditemukan." }  

## 6\. Link Deploy (Vercel)

- (Isi dengan URL Vercel Anda setelah berhasil deploy)
- Contoh: <https://api-cuci-sepatu-anda.vercel.app>

