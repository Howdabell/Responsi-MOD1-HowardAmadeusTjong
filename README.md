REST API Daftar Barang Cuci Sepatu

Deskripsi Umum

Proyek ini merupakan tugas responsi untuk modul Pembuatan API dengan JavaScript. API ini dibuat menggunakan Node.js dan Express.js, berfungsi untuk mengelola data sepatu yang sedang dicuci pada sebuah layanan jasa cuci sepatu. API ini terhubung ke database Supabase untuk penyimpanan data dan di-deploy ke Vercel.

Tujuan utama proyek ini adalah untuk mempermudah proses pencatatan, pemantauan, dan pembaruan status cucian sepatu secara digital melalui REST API sederhana.

Tujuan

Mengimplementasikan konsep CRUD (Create, Read, Update, Delete) dalam REST API.

Meningkatkan pemahaman penggunaan Express.js sebagai framework backend.

Mengelola data menggunakan database PostgreSQL melalui Supabase.

Menerapkan deployment backend ke Vercel.

Fitur Utama API

Metode

Endpoint

Deskripsi

GET

/items

Menampilkan seluruh daftar sepatu.

GET

/items?status=Selesai

(Bonus) Filter daftar sepatu berdasarkan status.

GET

/items/:id

Menampilkan detail satu sepatu.

POST

/items

Menambahkan data sepatu baru ke dalam daftar.

PUT

/items/:id

Memperbarui data/status sepatu (misalnya dari Sedang Dicuci menjadi Selesai).

DELETE

/items/:id

Menghapus data sepatu.

Teknologi yang Digunakan

Node.js: Runtime environment untuk menjalankan JavaScript di sisi server.

Express.js: Framework untuk membangun REST API.

Supabase: Backend-as-a-Service (BaaS) yang menyediakan database PostgreSQL.

Vercel: Platform untuk deployment aplikasi frontend dan backend (serverless).

dotenv: Modul untuk mengelola environment variables.

cors: Middleware untuk mengaktifkan CORS.

Setup Proyek

1. Setup Supabase

Buat akun di Supabase.

Buat Proyek baru.

Di dalam proyek Anda, pergi ke SQL Editor.

Klik New query dan jalankan skrip SQL berikut untuk membuat tabel items:

CREATE TABLE items (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  created_at TIMESTAMPTZ DEFAULT now() NOT NULL,
  nama TEXT NOT NULL,
  status TEXT NOT NULL,
  "tanggalMasuk" DATE NOT NULL,
  "tanggalSelesai" DATE
);

-- Aktifkan Row Level Security (RLS)
ALTER TABLE items ENABLE ROW LEVEL SECURITY;

-- Buat policy agar data bisa diakses publik (anon)
-- PERHATIAN: Ini mengizinkan SIAPA SAJA untuk CRUD.
-- Untuk produksi nyata, batasi ini hanya untuk user terotentikasi.
CREATE POLICY "Allow public CRUD"
ON items
FOR ALL
TO anon
USING (true)
WITH CHECK (true);


Setelah tabel dibuat, pergi ke Project Settings > API.

Catat Project URL dan Project API Keys (gunakan kunci anon public).

2. Struktur Data

Struktur data JSON yang digunakan untuk request/response:

{
  "id": 1,
  "created_at": "2025-10-08T10:00:00Z",
  "nama": "Nike Air Force 1",
  "status": "Sedang Dicuci",
  "tanggalMasuk": "2025-10-08",
  "tanggalSelesai": null
}


3. Instalasi Lokal

Clone repository ini (jika sudah ada di GitHub):

git clone [https://github.com/username/repo-name.git](https://github.com/username/repo-name.git)
cd repo-name


Install dependensi:

npm install


Buat file .env di root proyek. Salin isi dari .env.example dan isi dengan kredensial Supabase Anda:

SUPABASE_URL="https"//YOUR_PROJECT_URL.supabase.co"
SUPABASE_KEY="YOUR_SUPABASE_ANON_KEY"


Jalankan server secara lokal:

npm run dev


Server akan berjalan di http://localhost:3000.

4. Deployment ke Vercel

Push proyek Anda ke repository GitHub.

Buat akun di Vercel dan hubungkan dengan akun GitHub Anda.

Buat New Project dan impor repository Anda.

Vercel akan otomatis mendeteksi package.json dan vercel.json.

Sebelum deploy, pergi ke Settings > Environment Variables.

Tambahkan SUPABASE_URL dan SUPABASE_KEY Anda sebagai environment variables.

Klik Deploy. Vercel akan membangun dan men-deploy API Anda.

Contoh Request dan Response

Asumsikan Link Deploy Vercel Anda adalah https://api-cuci-sepatu.vercel.app

GET /items?status=Selesai
(Mendapatkan semua sepatu yang statusnya 'Selesai')

Response (200 OK):

[
  {
    "id": 1,
    "created_at": "2025-10-01T08:00:00Z",
    "nama": "Converse Chuck Taylor",
    "status": "Selesai",
    "tanggalMasuk": "2025-10-01",
    "tanggalSelesai": "2025-10-03"
  }
]


POST /items
(Menambahkan sepatu baru)

Request Body:

{
  "nama": "Nike Air Max",
  "status": "Sedang Dicuci",
  "tanggalMasuk": "2025-10-08",
  "tanggalSelesai": null
}


Response (201 Created):

{
  "message": "Data sepatu berhasil ditambahkan.",
  "data": {
    "id": 2,
    "created_at": "2025-10-08T11:30:00Z",
    "nama": "Nike Air Max",
    "status": "Sedang Dicuci",
    "tanggalMasuk": "2025-10-08",
    "tanggalSelesai": null
  }
}


PUT /items/2
(Memperbarui status sepatu dengan id 2)

Request Body:

{
  "status": "Selesai",
  "tanggalSelesai": "2025-10-09"
}


Response (200 OK):

{
  "message": "Status sepatu berhasil diperbarui.",
  "data": {
    "id": 2,
    "created_at": "2025-10-08T11:30:00Z",
    "nama": "Nike Air Max",
    "status": "Selesai",
    "tanggalMasuk": "2025-10-08",
    "tanggalSelesai": "2025-10-09"
  }
}


DELETE /items/1
(Menghapus sepatu dengan id 1)

Response (200 OK):

{
  "message": "Data sepatu berhasil dihapus."
}


Link Deploy (Vercel)

(Ganti dengan link Anda setelah deploy)
https://nama-proyek-anda.vercel.app
